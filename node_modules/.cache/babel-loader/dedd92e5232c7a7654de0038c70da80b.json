{"ast":null,"code":"import _classCallCheck from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Volumes/Angela He/treehacks/src/components/UserTab.js\";\nimport React, { Component } from 'react';\nimport AddCheckin from './Network/AddCheckin';\nimport $ from 'jquery';\nimport { withFirebase } from './Firebase';\nimport Avatar from './Misc/Avatar';\nimport CheckInRow from './Network/CheckinRow';\nimport Dropdown from './Misc/Dropdown';\n\nvar LogoutButton = function LogoutButton(props) {\n  return React.createElement(\"button\", {\n    id: \"logout-but\",\n    onClick: function onClick() {\n      props.logout();\n      props.firebase.doSignOut();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13\n    },\n    __self: this\n  }, \"Logout\");\n};\n\nvar LogoutButtonFB = withFirebase(LogoutButton);\nvar NULL_PRONOUN = 'Select..',\n    FEMALE_PRONOUN = 'She / her',\n    MALE_PRONOUN = 'He / him',\n    NON_PRONOUN = 'They / them';\nvar allPronouns = {};\nallPronouns[NULL_PRONOUN] = {\n  text: NULL_PRONOUN,\n  icon: 'help',\n  index: 0\n};\nallPronouns[FEMALE_PRONOUN] = {\n  text: FEMALE_PRONOUN,\n  icon: 'female',\n  index: 1\n};\nallPronouns[MALE_PRONOUN] = {\n  text: MALE_PRONOUN,\n  icon: 'male',\n  index: 2\n};\nallPronouns[NON_PRONOUN] = {\n  text: NON_PRONOUN,\n  icon: 'triangle',\n  index: 3\n};\n\nvar UserTab =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(UserTab, _React$Component);\n\n  function UserTab(props) {\n    var _this;\n\n    _classCallCheck(this, UserTab);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UserTab).call(this, props));\n\n    _this.setEditMode = function (bool) {\n      _this.setState({\n        editMode: bool\n      }); //TODO: save changes\n\n\n      if (bool === false) {\n        if ($('.profile-name').val() != _this.state.name) {\n          var NameVal = $('.profile-name').val();\n          var BioVal = $('.profile-bio').val();\n\n          _this.setState({\n            name: NameVal,\n            bio: BioVal\n          });\n\n          _this.props.setName(NameVal);\n\n          _this.props.setBio(BioVal);\n\n          _this.props.firebase.user(_this.props.uid).update({\n            name: NameVal,\n            bio: BioVal\n          });\n        }\n      }\n    };\n\n    _this.setAddMode = function (bool) {\n      _this.setState({\n        addMode: bool\n      });\n    };\n\n    _this.addCheckin = function (obj) {\n      var arr = _this.state.checkins;\n      arr.push(obj);\n\n      _this.setState({\n        checkins: arr\n      });\n\n      _this.props.setCheckins(arr);\n\n      _this.props.firebase.user(_this.props.uid).update({\n        checkins: arr\n      });\n    };\n\n    _this.removeCheckinAt = function (index) {\n      var arr = _this.state.checkins;\n      arr.splice(index, 1);\n\n      _this.setState({\n        checkins: arr\n      });\n\n      _this.props.setCheckins(arr);\n\n      _this.props.firebase.user(_this.props.uid).update({\n        checkins: arr\n      });\n    };\n\n    _this.uploadPpf = function (event) {\n      var firstFile = event.target.files[0]; // upload the first file only\n\n      var task = _this.props.firebase.photos(_this.props.uid).put(firstFile);\n\n      task.on('state_changed', function (snapshot) {\n        // Observe state change events such as progress, pause, and resume\n        // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n        var progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n      }, function (error) {// Handle unsuccessful uploads\n      }, function () {\n        // Handle successful uploads on complete\n        task.snapshot.ref.getDownloadURL().then(function (downloadURL) {\n          _this.props.firebase.user(_this.props.uid).update({\n            PpfURL: downloadURL\n          });\n\n          _this.setState({\n            PpfURL: downloadURL\n          });\n\n          _this.props.setPpfURL(downloadURL);\n        });\n      });\n    };\n\n    _this.setName = function (event) {\n      _this.setState({\n        name: event.target.value\n      });\n    };\n\n    _this.setBio = function (event) {\n      _this.setState({\n        bio: event.target.value\n      });\n    };\n\n    _this.setLocation = function (event) {\n      _this.setState({\n        location: event.target.value\n      });\n    };\n\n    _this.setPronouns = function (pronoun) {\n      if (pronoun == NULL_PRONOUN) {\n        _this.setState({\n          pronouns: null\n        });\n\n        return;\n      }\n\n      _this.setState({\n        pronouns: pronoun\n      });\n    };\n\n    _this.state = {\n      editMode: false,\n      checkins: _this.props.checkins,\n      name: _this.props.name,\n      bio: _this.props.bio,\n      location: _this.props.location,\n      pronouns: _this.props.pronouns,\n      addMode: false,\n      PpfURL: _this.props.PpfURL\n    };\n    return _this;\n  }\n\n  _createClass(UserTab, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var pronouns = this.state.pronouns;\n      var cornerButton, pic, name, bioEl, locationEl, pronounsEl, checkins, addQ;\n\n      if (this.state.editMode) {\n        cornerButton = React.createElement(\"button\", {\n          className: \"edit done\",\n          onClick: function onClick() {\n            return _this2.setEditMode(false);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197\n          },\n          __self: this\n        }, \"Done\");\n        pic = React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"file\",\n          accept: \"image/*\",\n          id: \"ppf-upload\",\n          onChange: this.uploadPpf,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 201\n          },\n          __self: this\n        }), React.createElement(\"label\", {\n          className: \"edit-pic\",\n          for: \"ppf-upload\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202\n          },\n          __self: this\n        }, React.createElement(Avatar, {\n          PpfURL: this.state.PpfURL,\n          content: React.createElement(\"div\", {\n            className: \"edit-pic-but\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 205\n            },\n            __self: this\n          }, React.createElement(\"span\", {\n            className: \"jam jam-pencil\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 206\n            },\n            __self: this\n          })),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203\n          },\n          __self: this\n        })));\n        name = React.createElement(\"input\", {\n          type: \"text\",\n          className: \"profile-name\",\n          onChange: this.setName,\n          value: this.state.name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214\n          },\n          __self: this\n        });\n        bioEl = React.createElement(\"input\", {\n          type: \"text\",\n          className: \"profile-bio\",\n          onChange: this.setBio,\n          value: this.state.bio,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 218\n          },\n          __self: this\n        });\n        locationEl = React.createElement(\"input\", {\n          type: \"text\",\n          className: \"profile-location\",\n          onChange: this.setLocation,\n          value: this.state.location,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 222\n          },\n          __self: this\n        });\n        pronounsEl = React.createElement(Dropdown, {\n          options: [allPronouns[NULL_PRONOUN], allPronouns[FEMALE_PRONOUN], allPronouns[MALE_PRONOUN], allPronouns[NON_PRONOUN]],\n          onChange: this.setPronouns,\n          selected: allPronouns[pronouns != null ? pronouns : NULL_PRONOUN].index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 226\n          },\n          __self: this\n        });\n        checkins = React.createElement(\"ul\", {\n          className: \"your-checkins\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 239\n          },\n          __self: this\n        }, this.state.checkins.map(function (checkin, index) {\n          return React.createElement(CheckInRow, {\n            q: checkin.q,\n            removeCheckinAt: _this2.removeCheckinAt,\n            index: index,\n            trash: true,\n            type: checkin.type,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 241\n            },\n            __self: this\n          });\n        }));\n      } else {\n        cornerButton = React.createElement(\"button\", {\n          className: \"edit\",\n          onClick: function onClick() {\n            return _this2.setEditMode(true);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 254\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"jam jam-pencil\",\n          style: {\n            color: '#9FC6C1'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 254\n          },\n          __self: this\n        }));\n        pic = React.createElement(Avatar, {\n          PpfURL: this.state.PpfURL,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 257\n          },\n          __self: this\n        });\n        name = React.createElement(\"div\", {\n          className: \"profile-name\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 260\n          },\n          __self: this\n        }, this.state.name);\n\n        if (this.state.bio != null) {\n          bioEl = React.createElement(\"p\", {\n            className: \"profile-bio\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 264\n            },\n            __self: this\n          }, this.state.bio ? this.state.bio : null);\n        } else {\n          bioEl = null;\n        }\n\n        if (this.state.location != null) {\n          locationEl = React.createElement(\"div\", {\n            className: \"profile-location\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 272\n            },\n            __self: this\n          }, React.createElement(\"span\", {\n            className: \"jam checkicon jam-map-marker\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 273\n            },\n            __self: this\n          }), this.state.location);\n        } else {\n          locationEl = null;\n        }\n\n        if (pronouns != null) {\n          pronounsEl = React.createElement(\"div\", {\n            className: \"profile-pronouns\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 283\n            },\n            __self: this\n          }, React.createElement(\"span\", {\n            className: \"jam checkicon jam-\" + allPronouns[pronouns].icon,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 284\n            },\n            __self: this\n          }), ' ' + pronouns);\n        } else {\n          pronounsEl = null;\n        }\n\n        checkins = React.createElement(\"ul\", {\n          className: \"your-checkins\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 294\n          },\n          __self: this\n        }, this.state.checkins.map(function (checkin, index) {\n          return React.createElement(CheckInRow, {\n            q: checkin.q,\n            trash: false,\n            type: checkin.type,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 296\n            },\n            __self: this\n          });\n        }));\n      }\n\n      if (this.state.addMode) {\n        addQ = React.createElement(AddCheckin, {\n          setAddMode: this.setAddMode,\n          uid: this.props.uid,\n          addCheckin: this.addCheckin,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 308\n          },\n          __self: this\n        });\n      } else {\n        addQ = React.createElement(\"button\", {\n          className: \"add-checkin\",\n          onClick: function onClick() {\n            _this2.setAddMode(true);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 316\n          },\n          __self: this\n        }, \"Add check-in\");\n      }\n\n      var freq;\n      freq = React.createElement(\"button\", {\n        onClick: function onClick() {},\n        className: \"freq dropdown\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323\n        },\n        __self: this\n      }, \"Every day\", React.createElement(\"span\", {\n        className: \"jam jam-chevron-down\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327\n        },\n        __self: this\n      }));\n      return React.createElement(\"section\", {\n        className: \"user\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333\n        },\n        __self: this\n      }, cornerButton, pic, name, bioEl, locationEl, pronounsEl, React.createElement(\"div\", {\n        className: \"check-in-edit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345\n        },\n        __self: this\n      }, \"Your check-in\"), React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348\n        },\n        __self: this\n      }, \"Check-in frequency\"), freq, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351\n        },\n        __self: this\n      }, \"Check-in questions\"), checkins, addQ), React.createElement(LogoutButtonFB, {\n        logout: this.props.logout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return UserTab;\n}(React.Component);\n\nexport default UserTab;","map":{"version":3,"sources":["/Volumes/Angela He/treehacks/src/components/UserTab.js"],"names":["React","Component","AddCheckin","$","withFirebase","Avatar","CheckInRow","Dropdown","LogoutButton","props","logout","firebase","doSignOut","LogoutButtonFB","NULL_PRONOUN","FEMALE_PRONOUN","MALE_PRONOUN","NON_PRONOUN","allPronouns","text","icon","index","UserTab","setEditMode","bool","setState","editMode","val","state","name","NameVal","BioVal","bio","setName","setBio","user","uid","update","setAddMode","addMode","addCheckin","obj","arr","checkins","push","setCheckins","removeCheckinAt","splice","uploadPpf","event","firstFile","target","files","task","photos","put","on","snapshot","progress","bytesTransferred","totalBytes","error","ref","getDownloadURL","then","downloadURL","PpfURL","setPpfURL","value","setLocation","location","setPronouns","pronoun","pronouns","cornerButton","pic","bioEl","locationEl","pronounsEl","addQ","map","checkin","q","type","color","freq"],"mappings":"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","sourcesContent":["\nimport React, { Component } from 'react';\nimport AddCheckin from './Network/AddCheckin';\nimport $ from 'jquery';\nimport { withFirebase } from './Firebase';\nimport Avatar from './Misc/Avatar';\nimport CheckInRow from './Network/CheckinRow';\nimport Dropdown from './Misc/Dropdown';\n\n\nconst LogoutButton = (props) => {\n  return (\n    <button id=\"logout-but\"\n      onClick={() => {\n        props.logout();\n        props.firebase.doSignOut();\n      }}>Logout</button>\n  )\n};\n\nconst LogoutButtonFB = withFirebase(LogoutButton);\n\nlet NULL_PRONOUN = 'Select..',\n  FEMALE_PRONOUN = 'She / her',\n  MALE_PRONOUN = 'He / him',\n  NON_PRONOUN = 'They / them';\n\nlet allPronouns = {};\n\nallPronouns[NULL_PRONOUN] =\n  {\n    text: NULL_PRONOUN,\n    icon: 'help',\n    index: 0\n  };\n\nallPronouns[FEMALE_PRONOUN] =\n  {\n    text: FEMALE_PRONOUN,\n    icon: 'female',\n    index: 1\n  };\n\nallPronouns[MALE_PRONOUN] =\n  {\n    text: MALE_PRONOUN,\n    icon: 'male',\n    index: 2\n  };\n\nallPronouns[NON_PRONOUN] =\n  {\n    text: NON_PRONOUN,\n    icon: 'triangle',\n    index: 3\n  };\n\n\nclass UserTab extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      editMode: false,\n      checkins: this.props.checkins,\n      name: this.props.name,\n      bio: this.props.bio,\n      location: this.props.location,\n      pronouns: this.props.pronouns,\n      addMode: false,\n      PpfURL: this.props.PpfURL,\n    };\n  }\n\n  setEditMode = (bool) => {\n    this.setState({\n      editMode: bool\n    });\n\n    //TODO: save changes\n    if (bool === false) {\n      if ($('.profile-name').val() != this.state.name) {\n        let NameVal = $('.profile-name').val();\n        let BioVal = $('.profile-bio').val();\n        this.setState({\n          name: NameVal,\n          bio: BioVal\n        });\n        this.props.setName(NameVal);\n        this.props.setBio(BioVal);\n\n        this.props.firebase\n          .user(this.props.uid)\n          .update({\n            name: NameVal,\n            bio: BioVal\n          });\n      }\n    }\n  };\n\n  setAddMode = (bool) => {\n    this.setState({\n      addMode: bool\n    });\n  };\n\n  addCheckin = (obj) => {\n    let arr = this.state.checkins;\n    arr.push(obj);\n    this.setState({ checkins: arr });\n    this.props.setCheckins(arr);\n\n    this.props.firebase\n      .user(this.props.uid)\n      .update({\n        checkins: arr\n      });\n  }\n\n  removeCheckinAt = (index) => {\n    let arr = this.state.checkins;\n    arr.splice(index, 1);\n    this.setState({ checkins: arr });\n    this.props.setCheckins(arr);\n\n    this.props.firebase\n      .user(this.props.uid)\n      .update({\n        checkins: arr\n      });\n  }\n\n  uploadPpf = (event) => {\n    let firstFile = event.target.files[0] // upload the first file only\n    let task = this.props.firebase.photos(this.props.uid).put(firstFile);\n\n    task.on('state_changed', (snapshot) => {\n      // Observe state change events such as progress, pause, and resume\n      // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n      var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n\n    }, (error) => {\n      // Handle unsuccessful uploads\n    }, () => {\n      // Handle successful uploads on complete\n      task.snapshot.ref.getDownloadURL().then((downloadURL) => {\n\n        this.props.firebase\n          .user(this.props.uid)\n          .update({\n            PpfURL: downloadURL\n          });\n\n        this.setState({ PpfURL: downloadURL });\n        this.props.setPpfURL(downloadURL);\n      });\n    });\n  }\n\n  setName = (event) => {\n    this.setState({ name: event.target.value })\n  }\n\n  setBio = (event) => {\n    this.setState({ bio: event.target.value })\n  }\n\n  setLocation = (event) => {\n    this.setState({ location: event.target.value })\n  }\n\n  setPronouns = (pronoun) => {\n    if (pronoun == NULL_PRONOUN) {\n      this.setState({ pronouns: null })\n      return;\n    }\n\n    this.setState({ pronouns: pronoun })\n  }\n\n  render() {\n    const { pronouns } = this.state;\n\n\n    let cornerButton,\n      pic,\n      name,\n      bioEl,\n      locationEl,\n      pronounsEl,\n      checkins,\n      addQ;\n\n\n    if (this.state.editMode) {\n      cornerButton = (\n        <button className=\"edit done\" onClick={() => this.setEditMode(false)}>Done</button>\n      );\n      pic = (\n        <div>\n          <input type=\"file\" accept=\"image/*\" id=\"ppf-upload\" onChange={this.uploadPpf} />\n          <label className=\"edit-pic\" for=\"ppf-upload\">\n            <Avatar PpfURL={this.state.PpfURL}\n              content={\n                <div className=\"edit-pic-but\">\n                  <span className=\"jam jam-pencil\"></span>\n                </div>\n              }\n            />\n          </label>\n        </div>\n      );\n      name = (\n        <input type=\"text\" className=\"profile-name\" onChange={this.setName} value={this.state.name}></input>\n      );\n\n      bioEl = (\n        <input type=\"text\" className=\"profile-bio\" onChange={this.setBio} value={this.state.bio}></input>\n      );\n\n      locationEl = (\n        <input type=\"text\" className=\"profile-location\" onChange={this.setLocation} value={this.state.location}></input>\n      );\n\n      pronounsEl = (\n        <Dropdown\n          options={[\n            allPronouns[NULL_PRONOUN],\n            allPronouns[FEMALE_PRONOUN],\n            allPronouns[MALE_PRONOUN],\n            allPronouns[NON_PRONOUN]\n          ]}\n          onChange={this.setPronouns}\n          selected={allPronouns[pronouns != null ? pronouns : NULL_PRONOUN].index}\n        ></Dropdown>\n      );\n\n      checkins = (\n        <ul className=\"your-checkins\">\n          {this.state.checkins.map((checkin, index) => {\n            return <CheckInRow\n              q={checkin.q}\n              removeCheckinAt={this.removeCheckinAt}\n              index={index}\n              trash={true}\n              type={checkin.type}\n            />;\n          })}\n        </ul>\n      );\n    }\n    else {\n      cornerButton = (\n        <button className=\"edit\" onClick={() => this.setEditMode(true)}><span className=\"jam jam-pencil\" style={{ color: '#9FC6C1' }}></span></button>\n      );\n      pic = (\n        <Avatar PpfURL={this.state.PpfURL} />\n      );\n      name = (\n        <div className=\"profile-name\">{this.state.name}</div>\n      );\n\n      if (this.state.bio != null) {\n        bioEl = <p className=\"profile-bio\">\n          {this.state.bio ? this.state.bio : null}\n        </p>\n      } else {\n        bioEl = null;\n      }\n\n      if (this.state.location != null) {\n        locationEl = <div className=\"profile-location\">\n          <span className=\"jam checkicon jam-map-marker\"></span>\n          {this.state.location}\n        </div>;\n      } else {\n        locationEl = null;\n      }\n\n\n      if (pronouns != null) {\n\n        pronounsEl = <div className=\"profile-pronouns\">\n          <span className={\"jam checkicon jam-\" + allPronouns[pronouns].icon}></span>\n          {' ' + pronouns}\n        </div>;\n      }\n      else {\n        pronounsEl = null;\n      }\n\n\n      checkins = (\n        <ul className=\"your-checkins\">\n          {this.state.checkins.map(function (checkin, index) {\n            return <CheckInRow\n              q={checkin.q}\n              trash={false}\n              type={checkin.type}\n            />;\n          })}\n        </ul>\n      );\n    }\n\n    if (this.state.addMode) {\n      addQ = (\n        <AddCheckin\n          setAddMode={this.setAddMode}\n          uid={this.props.uid}\n          addCheckin={this.addCheckin}\n        />\n      );\n    } else {\n      addQ = (\n        <button className=\"add-checkin\" onClick={() => { this.setAddMode(true) }}>Add check-in\n        </button>\n      );\n    }\n\n    let freq;\n    freq = (\n      <button onClick={() => {\n\n      }} className=\"freq dropdown\">\n        Every day\n        <span className=\"jam jam-chevron-down\"></span>\n      </button>\n    );\n\n\n    return (\n      <section className=\"user\">\n        {cornerButton}\n        {pic}\n        {name}\n        {bioEl}\n        {locationEl}\n        {pronounsEl}\n\n\n\n\n        <div className=\"check-in-edit\">\n          <h2>Your check-in</h2>\n\n\n          <h3>Check-in frequency</h3>\n          {freq}\n\n          <h3>Check-in questions</h3>\n          {checkins}\n          {addQ}\n        </div>\n        <LogoutButtonFB\n          logout={this.props.logout}\n        />\n\n      </section>\n    );\n  }\n}\n\n\nexport default UserTab;"]},"metadata":{},"sourceType":"module"}