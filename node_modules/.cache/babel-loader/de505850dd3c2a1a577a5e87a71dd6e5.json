{"ast":null,"code":"import _classCallCheck from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Volumes/Angela He/treehacks/src/components/Network/ListOfUsers.js\";\nimport React from 'react';\n/*\nprops:\n  containerClass\n  firebase\n  uid\n  key (e.g. muteList, network)\n  renderFunc : function that takes in user object and outputs component\n  errorEl\n*/\n\nvar ListOfUsers =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ListOfUsers, _React$Component);\n\n  function ListOfUsers(props) {\n    var _this;\n\n    _classCallCheck(this, ListOfUsers);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ListOfUsers).call(this, props));\n    _this.state = {\n      loadedUsers: {}\n    };\n    return _this;\n  }\n\n  _createClass(ListOfUsers, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var ref = this.props.firebase.user(this.props.uid).collection(this.props.listName);\n      ref.onSnapshot(function (querySnapshot) {\n        var users = {};\n        querySnapshot.docChanges().forEach(function (change) {\n          var doc = change.doc;\n\n          if (change.type === \"added\" || change.type === \"modified\") {\n            _this2.props.firebase.user(doc.id).get().then(function (doc) {\n              users[doc.id] = doc.data();\n\n              _this2.setState({\n                loadedUsers: users\n              });\n            });\n          }\n\n          if (change.type === \"removed\") {\n            delete users[doc.id];\n          }\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var loadedUsers = this.state.loadedUsers;\n      var renderUsers = [];\n\n      for (var key in loadedUsers) {\n        renderUsers.push(this.props.renderFunc(loadedUsers[key], key));\n      }\n\n      return React.createElement(\"div\", {\n        className: this.props.containerClass,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, renderUsers.length > 0 ? renderUsers : this.props.errorEl);\n    }\n  }]);\n\n  return ListOfUsers;\n}(React.Component);\n\n;\nexport default ListOfUsers;","map":{"version":3,"sources":["/Volumes/Angela He/treehacks/src/components/Network/ListOfUsers.js"],"names":["React","ListOfUsers","props","state","loadedUsers","ref","firebase","user","uid","collection","listName","onSnapshot","querySnapshot","users","docChanges","forEach","change","doc","type","id","get","then","data","setState","renderUsers","key","push","renderFunc","containerClass","length","errorEl","Component"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA;;;;;;;;;;IASMC,W;;;;;AACJ,uBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,qFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACXC,MAAAA,WAAW,EAAE;AADF,KAAb;AAFiB;AAKlB;;;;wCAEmB;AAAA;;AAClB,UAAIC,GAAG,GAAG,KAAKH,KAAL,CAAWI,QAAX,CAAoBC,IAApB,CAAyB,KAAKL,KAAL,CAAWM,GAApC,EAAyCC,UAAzC,CAAoD,KAAKP,KAAL,CAAWQ,QAA/D,CAAV;AAEAL,MAAAA,GAAG,CAACM,UAAJ,CAAe,UAACC,aAAD,EAAmB;AAChC,YAAIC,KAAK,GAAG,EAAZ;AACAD,QAAAA,aAAa,CAACE,UAAd,GAA2BC,OAA3B,CAAmC,UAACC,MAAD,EAAY;AAC7C,cAAIC,GAAG,GAAGD,MAAM,CAACC,GAAjB;;AACA,cAAID,MAAM,CAACE,IAAP,KAAgB,OAAhB,IAA2BF,MAAM,CAACE,IAAP,KAAgB,UAA/C,EAA2D;AACzD,YAAA,MAAI,CAAChB,KAAL,CAAWI,QAAX,CAAoBC,IAApB,CAAyBU,GAAG,CAACE,EAA7B,EACGC,GADH,GAEGC,IAFH,CAEQ,UAACJ,GAAD,EAAS;AACbJ,cAAAA,KAAK,CAACI,GAAG,CAACE,EAAL,CAAL,GAAgBF,GAAG,CAACK,IAAJ,EAAhB;;AACA,cAAA,MAAI,CAACC,QAAL,CAAc;AAAEnB,gBAAAA,WAAW,EAAES;AAAf,eAAd;AACD,aALH;AAMD;;AACD,cAAIG,MAAM,CAACE,IAAP,KAAgB,SAApB,EAA+B;AAC7B,mBAAOL,KAAK,CAACI,GAAG,CAACE,EAAL,CAAZ;AACD;AACF,SAbD;AAcD,OAhBD;AAiBD;;;6BAEQ;AAAA,UACCf,WADD,GACiB,KAAKD,KADtB,CACCC,WADD;AAGP,UAAIoB,WAAW,GAAG,EAAlB;;AACA,WAAK,IAAIC,GAAT,IAAgBrB,WAAhB,EAA6B;AAC3BoB,QAAAA,WAAW,CAACE,IAAZ,CAAiB,KAAKxB,KAAL,CAAWyB,UAAX,CAAsBvB,WAAW,CAACqB,GAAD,CAAjC,EAAwCA,GAAxC,CAAjB;AACD;;AAED,aAAO;AAAK,QAAA,SAAS,EAAE,KAAKvB,KAAL,CAAW0B,cAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACJJ,WAAW,CAACK,MAAZ,GAAqB,CAArB,GAAyBL,WAAzB,GAAuC,KAAKtB,KAAL,CAAW4B,OAD9C,CAAP;AAGD;;;;EAzCuB9B,KAAK,CAAC+B,S;;AA2C/B;AAED,eAAe9B,WAAf","sourcesContent":["import React from 'react';\n\n/*\nprops:\n  containerClass\n  firebase\n  uid\n  key (e.g. muteList, network)\n  renderFunc : function that takes in user object and outputs component\n  errorEl\n*/\nclass ListOfUsers extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loadedUsers: {},\n    };\n  }\n\n  componentDidMount() {\n    let ref = this.props.firebase.user(this.props.uid).collection(this.props.listName);\n\n    ref.onSnapshot((querySnapshot) => {\n      let users = {};\n      querySnapshot.docChanges().forEach((change) => {\n        let doc = change.doc;\n        if (change.type === \"added\" || change.type === \"modified\") {\n          this.props.firebase.user(doc.id)\n            .get()\n            .then((doc) => {\n              users[doc.id] = doc.data();\n              this.setState({ loadedUsers: users });\n            })\n        }\n        if (change.type === \"removed\") {\n          delete users[doc.id]\n        }\n      });\n    });\n  }\n\n  render() {\n    const { loadedUsers } = this.state;\n\n    let renderUsers = [];\n    for (let key in loadedUsers) {\n      renderUsers.push(this.props.renderFunc(loadedUsers[key], key));\n    }\n\n    return <div className={this.props.containerClass}>\n      {renderUsers.length > 0 ? renderUsers : this.props.errorEl}\n    </div>;\n  }\n\n};\n\nexport default ListOfUsers;"]},"metadata":{},"sourceType":"module"}