{"ast":null,"code":"import _defineProperty from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Volumes/Angela He/treehacks/src/App.js\";\nimport React from 'react';\nimport $ from 'jquery';\nimport moment from 'moment';\nimport './App.css';\nimport NavBar from './components/NavBar.js';\nimport CheckinModal from './components/CheckinModal.js';\nimport FeedTab from './components/Feed/FeedTab.js';\nimport HomePage from './components/HomePage.js';\nimport NetworkTab from './components/Network/NetworkTab.js';\nimport UserTab from './components/User/UserTab.js';\nimport Onboarding from './components/Onboarding.js';\nimport { withFirebase } from './components/Firebase';\nvar UserTabFB = withFirebase(UserTab);\nvar NetworkTabFB = withFirebase(NetworkTab);\nvar NavBarFB = withFirebase(NavBar);\nvar FeedTabFB = withFirebase(FeedTab);\nvar CheckinModalFB = withFirebase(CheckinModal);\nvar HomePageFB = withFirebase(HomePage);\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.listenForUserData = function (uid) {\n      var ref = _this.props.firebase.user(uid);\n\n      ref.onSnapshot(function (doc) {\n        _this.setState({\n          userData: doc.data()\n        });\n      });\n\n      _this.props.firebase.network(uid).onSnapshot(function (snapshot) {\n        var newNetwork = _this.state.userNetwork;\n        snapshot.docChanges().forEach(function (change) {\n          if (change.type === \"added\") {\n            newNetwork[change.doc.id] = true;\n          }\n\n          if (change.type === \"modified\") {}\n\n          if (change.type === \"removed\") {\n            delete newNetwork[change.doc.id];\n          }\n        });\n\n        _this.setState({\n          userNetwork: newNetwork\n        });\n      });\n\n      _this.props.firebase.requests(uid).onSnapshot(function (snapshot) {\n        var newRequests = _this.state.userRequests;\n        snapshot.docChanges().forEach(function (change) {\n          if (change.type === \"added\") {\n            newRequests[change.doc.id] = true;\n          }\n\n          if (change.type === \"modified\") {}\n\n          if (change.type === \"removed\") {\n            delete newRequests[change.doc.id];\n          }\n        });\n\n        _this.setState({\n          userRequests: newRequests\n        });\n      });\n    };\n\n    _this.SignUp = function (uid) {\n      _this.setState({\n        onboarding: true\n      });\n\n      _this.listenForUserData(uid);\n    };\n\n    _this.checkLogin = function (uid) {\n      _this.listenForUserData(uid);\n    };\n\n    _this.needToCheckin = function () {\n      if (_this.state.userData.checkinFreq && _this.state.userData.checkinFreq[new Date().getDay()] == true && _this.state.userData.lastCheckin != moment().format('L')) {\n        return true;\n      } else {\n        return false;\n      }\n    };\n\n    _this.setActiveTab = function (index) {\n      _this.setState({\n        activeTab: index\n      });\n    };\n\n    _this.setUserInfo = function (name, bio, location, pronouns) {\n      _this.setState({\n        userData: _objectSpread({\n          name: name,\n          bio: bio,\n          location: location,\n          pronouns: pronouns\n        }, _this.state.userData)\n      });\n    };\n\n    _this.updateUserData = function (key, val) {\n      _this.setState({\n        userData: _objectSpread({}, _this.state.userData, _defineProperty({}, key, val))\n      });\n    };\n\n    _this.setOnboarding = function (bool) {\n      _this.setState({\n        onboarding: bool\n      });\n    };\n\n    _this.removeUser = function () {\n      _this.setState({\n        userData: null\n      });\n    };\n\n    _this.handleScroll = function (e) {\n      var bottom = e.target.scrollHeight - e.target.scrollTop === e.target.clientHeight;\n\n      if (bottom) {\n        _this.setState({\n          loadMore: true\n        });\n\n        console.log(\"bees\");\n      } else {\n        if (_this.state.loadMore) {\n          _this.setState({\n            loadMore: false\n          });\n        }\n      }\n    };\n\n    _this.state = {\n      baseURL: '',\n      activeTab: 0,\n      userData: null,\n      userNetwork: {},\n      userRequests: {},\n      onboarding: false,\n      feed: [],\n      loadMore: false\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (this.state.userData === null) {\n        return React.createElement(HomePageFB, {\n          checkLogin: this.checkLogin,\n          SignUp: this.SignUp,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        });\n      } else if (this.state.onboarding) {\n        return React.createElement(Onboarding, {\n          setOnboarding: this.setOnboarding,\n          name: this.state.userData.name,\n          uid: this.state.userData.uid,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169\n          },\n          __self: this\n        });\n      }\n\n      var activeTab; //active tab is feed\n\n      if (this.state.activeTab == 0) {\n        activeTab = React.createElement(FeedTabFB, {\n          loadMore: this.state.loadMore,\n          PpfURL: this.state.userData.PpfURL,\n          name: this.state.userData.name,\n          uid: this.state.userData.uid,\n          network: this.state.userNetwork,\n          feed: this.state.feed,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181\n          },\n          __self: this\n        });\n      } //active tab is network\n      else if (this.state.activeTab == 1) {\n          activeTab = React.createElement(NetworkTabFB, {\n            uid: this.state.userData.uid,\n            requests: this.state.userRequests,\n            network: this.state.userNetwork,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 194\n            },\n            __self: this\n          });\n        } else {\n          activeTab = React.createElement(UserTabFB, {\n            removeUser: this.removeUser,\n            checkins: this.state.userData.checkins,\n            name: this.state.userData.name,\n            bio: this.state.userData.bio,\n            location: this.state.userData.location,\n            pronouns: this.state.userData.pronouns,\n            checkinFreq: this.state.userData.checkinFreq,\n            checkinCategories: this.state.userData.checkinCategories,\n            uid: this.state.userData.uid,\n            PpfURL: this.state.userData.PpfURL,\n            setUserInfo: this.setUserInfo,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 203\n            },\n            __self: this\n          });\n        }\n\n      return React.createElement(\"div\", {\n        className: \"container\",\n        onScroll: function onScroll(e) {\n          _this2.handleScroll(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, React.createElement(NavBarFB, {\n        setActiveTab: this.setActiveTab,\n        activeTab: this.state.activeTab,\n        requestsLength: Object.keys(this.state.userRequests).length,\n        uid: this.state.userData.uid,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }), activeTab, React.createElement(\"div\", {\n        className: \"bg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"main-bg-texture\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }), this.needToCheckin() ? React.createElement(CheckinModalFB, {\n        PpfURL: this.state.userData.PpfURL,\n        network: this.state.userNetwork,\n        name: this.state.userData.name,\n        uid: this.state.userData.uid,\n        updateUserData: this.updateUserData,\n        checkins: this.state.userData.checkins ? this.state.userData.checkins : [],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }) : null);\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport default withFirebase(App);","map":{"version":3,"sources":["/Volumes/Angela He/treehacks/src/App.js"],"names":["React","$","moment","NavBar","CheckinModal","FeedTab","HomePage","NetworkTab","UserTab","Onboarding","withFirebase","UserTabFB","NetworkTabFB","NavBarFB","FeedTabFB","CheckinModalFB","HomePageFB","App","props","listenForUserData","uid","ref","firebase","user","onSnapshot","doc","setState","userData","data","network","snapshot","newNetwork","state","userNetwork","docChanges","forEach","change","type","id","requests","newRequests","userRequests","SignUp","onboarding","checkLogin","needToCheckin","checkinFreq","Date","getDay","lastCheckin","format","setActiveTab","index","activeTab","setUserInfo","name","bio","location","pronouns","updateUserData","key","val","setOnboarding","bool","removeUser","handleScroll","e","bottom","target","scrollHeight","scrollTop","clientHeight","loadMore","console","log","baseURL","feed","PpfURL","checkins","checkinCategories","Object","keys","length","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport $ from 'jquery';\nimport moment from 'moment';\n\nimport './App.css';\nimport NavBar from './components/NavBar.js';\nimport CheckinModal from './components/CheckinModal.js';\nimport FeedTab from './components/Feed/FeedTab.js';\nimport HomePage from './components/HomePage.js';\nimport NetworkTab from './components/Network/NetworkTab.js';\nimport UserTab from './components/User/UserTab.js';\nimport Onboarding from './components/Onboarding.js';\nimport { withFirebase } from './components/Firebase';\n\nconst UserTabFB = withFirebase(UserTab);\n\nconst NetworkTabFB = withFirebase(NetworkTab);\n\nconst NavBarFB = withFirebase(NavBar);\n\nconst FeedTabFB = withFirebase(FeedTab);\n\nconst CheckinModalFB = withFirebase(CheckinModal);\n\nconst HomePageFB = withFirebase(HomePage);\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      baseURL: '',\n      activeTab: 0,\n      userData: null,\n      userNetwork: {},\n      userRequests: {},\n      onboarding: false,\n      feed: [],\n      loadMore: false\n    };\n  }\n\n  listenForUserData = (uid) => {\n    let ref = this.props.firebase.user(uid);\n\n    ref.onSnapshot((doc) => {\n      this.setState({ userData: doc.data() })\n    })\n\n    this.props.firebase.network(uid).onSnapshot((snapshot) => {\n      let newNetwork = this.state.userNetwork;\n      snapshot.docChanges().forEach((change) => {\n        if (change.type === \"added\") {\n          newNetwork[change.doc.id] = true;\n        }\n        if (change.type === \"modified\") {\n        }\n        if (change.type === \"removed\") {\n          delete newNetwork[change.doc.id]\n        }\n      });\n      this.setState({ userNetwork: newNetwork })\n    });\n\n    this.props.firebase.requests(uid).onSnapshot((snapshot) => {\n      let newRequests = this.state.userRequests;\n      snapshot.docChanges().forEach((change) => {\n        if (change.type === \"added\") {\n          newRequests[change.doc.id] = true;\n        }\n        if (change.type === \"modified\") {\n        }\n        if (change.type === \"removed\") {\n          delete newRequests[change.doc.id]\n        }\n      });\n      this.setState({ userRequests: newRequests })\n    });\n  }\n\n  SignUp = (uid) => {\n    this.setState({\n      onboarding: true\n    });\n    this.listenForUserData(uid)\n  }\n\n  checkLogin = (uid) => {\n    this.listenForUserData(uid)\n  }\n\n  needToCheckin = () => {\n    if (this.state.userData.checkinFreq &&\n      this.state.userData.checkinFreq[new Date().getDay()] == true &&\n      this.state.userData.lastCheckin != moment().format('L')) {\n      return true;\n    }\n    else {\n      return false;\n    }\n  }\n\n  setActiveTab = (index) => {\n    this.setState({\n      activeTab: index,\n    });\n  }\n\n  setUserInfo = (name, bio, location, pronouns) => {\n    this.setState({\n      userData:\n      {\n        name: name,\n        bio: bio,\n        location: location,\n        pronouns: pronouns,\n        ...this.state.userData,\n      }\n    })\n  }\n\n  updateUserData = (key, val) => {\n    this.setState({\n      userData: {\n        ...this.state.userData,\n        [key]: val\n      }\n    })\n  }\n\n  setOnboarding = (bool) => {\n    this.setState({ onboarding: bool })\n  }\n\n  removeUser = () => {\n    this.setState({\n      userData: null\n    });\n  }\n\n  handleScroll = (e) => {\n    const bottom = e.target.scrollHeight - e.target.scrollTop === e.target.clientHeight;\n\n    if (bottom) {\n      this.setState({\n        loadMore: true\n      })\n      console.log(\"bees\")\n    }\n    else {\n      if (this.state.loadMore) {\n        this.setState({\n          loadMore: false\n        })\n      }\n    }\n  }\n\n  render() {\n    if (this.state.userData === null) {\n      return (\n        <HomePageFB\n          checkLogin={this.checkLogin}\n          SignUp={this.SignUp}\n        />\n      );\n    }\n    else if (this.state.onboarding) {\n      return (\n        <Onboarding\n          setOnboarding={this.setOnboarding}\n          name={this.state.userData.name}\n          uid={this.state.userData.uid}\n        />\n      );\n    }\n\n    var activeTab;\n    //active tab is feed\n    if (this.state.activeTab == 0) {\n      activeTab = (\n        <FeedTabFB\n          loadMore={this.state.loadMore}\n          PpfURL={this.state.userData.PpfURL}\n          name={this.state.userData.name}\n          uid={this.state.userData.uid}\n          network={this.state.userNetwork}\n          feed={this.state.feed}\n        />\n      );\n    }\n    //active tab is network\n    else if (this.state.activeTab == 1) {\n      activeTab = (\n        <NetworkTabFB\n          uid={this.state.userData.uid}\n          requests={this.state.userRequests}\n          network={this.state.userNetwork}\n        />\n      );\n    }\n    else {\n      activeTab = (\n        <UserTabFB\n          removeUser={this.removeUser}\n          checkins={this.state.userData.checkins}\n          name={this.state.userData.name}\n          bio={this.state.userData.bio}\n          location={this.state.userData.location}\n          pronouns={this.state.userData.pronouns}\n          checkinFreq={this.state.userData.checkinFreq}\n          checkinCategories={this.state.userData.checkinCategories}\n          uid={this.state.userData.uid}\n          PpfURL={this.state.userData.PpfURL}\n          setUserInfo={this.setUserInfo}\n        />\n      );\n    }\n\n    return (\n      <div className=\"container\" onScroll={(e) => { this.handleScroll(e) }}>\n        <NavBarFB\n          setActiveTab={this.setActiveTab}\n          activeTab={this.state.activeTab}\n          requestsLength={Object.keys(this.state.userRequests).length}\n          uid={this.state.userData.uid}\n        />\n\n        {activeTab}\n\n        <div className=\"bg\"></div>\n        <div className=\"main-bg-texture\"></div>\n\n        {this.needToCheckin() ?\n          <CheckinModalFB\n            PpfURL={this.state.userData.PpfURL}\n            network={this.state.userNetwork}\n            name={this.state.userData.name}\n            uid={this.state.userData.uid}\n            updateUserData={this.updateUserData}\n            checkins={this.state.userData.checkins ? this.state.userData.checkins : []}\n          />\n          : null}\n      </div>\n    );\n  }\n}\n\nexport default withFirebase(App);\n"]},"metadata":{},"sourceType":"module"}