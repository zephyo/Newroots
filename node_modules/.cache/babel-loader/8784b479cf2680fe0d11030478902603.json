{"ast":null,"code":"import _classCallCheck from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Volumes/Angela He/treehacks/src/components/User/Settings/EditSecurity.js\";\nimport React from 'react';\nimport SaveCancelHeader from '../../Misc/SaveCancelHeader';\nimport SimpleModal from '../../Misc/SimpleModal';\n/*\n  goBack\n  key\n  inputType\n  verifyInput : func(str), return str\n  successCallback\n  failCallback\n  firebase\n*/\n\nvar EditSecurity =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(EditSecurity, _React$Component);\n\n  function EditSecurity(props) {\n    var _this;\n\n    _classCallCheck(this, EditSecurity);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EditSecurity).call(this, props));\n\n    _this.setValue = function (e) {\n      return _this.setState({\n        value: e.target.value\n      });\n    };\n\n    _this.setPassword = function (e) {\n      return _this.setState({\n        password: e.target.value\n      });\n    };\n\n    _this.confirmPword = function (bool) {\n      return _this.setState({\n        confirmPword: bool\n      });\n    };\n\n    _this.checkSubmit = function () {\n      var error = _this.props.verifyInput(_this.state.value);\n\n      _this.setState({\n        error: error\n      });\n\n      if (error === '') {\n        _this.confirmPword(true);\n      }\n    };\n\n    _this.reAuth = function () {\n      _this.confirmPword(false);\n\n      _this.props.firebase.reAuth(_this.state.password, function (user) {\n        return _this.props.successCallback(_this.state.value);\n      }, _this.onFail);\n    };\n\n    _this.onFail = function (error) {\n      _this.setState({\n        error: error.message\n      });\n    };\n\n    _this.state = {\n      value: '',\n      error: '',\n      password: '',\n      confirmPword: false\n    };\n    return _this;\n  }\n\n  _createClass(EditSecurity, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var modal;\n      var isInvalid = this.state.value == null || this.state.value == '';\n      console.log('key:' + this.props.type);\n\n      if (this.state.confirmPword == true) {\n        modal = React.createElement(SimpleModal, {\n          t: \"Enter your password\",\n          footer: React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 56\n            },\n            __self: this\n          }, React.createElement(\"input\", {\n            type: \"password\",\n            placeholder: \"Password\",\n            onChange: this.setPassword,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 57\n            },\n            __self: this\n          }), React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 58\n            },\n            __self: this\n          }, React.createElement(\"button\", {\n            onClick: function onClick() {\n              return _this2.confirmPword(false);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 59\n            },\n            __self: this\n          }, \"Cancel\"), React.createElement(\"button\", {\n            onClick: this.reAuth,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 60\n            },\n            __self: this\n          }, \"Confirm\"))),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(SaveCancelHeader, {\n        Cancel: this.props.goBack,\n        Save: this.checkSubmit,\n        disabled: isInvalid,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, 'Change your ' + this.props.type), React.createElement(\"input\", {\n        type: this.props.inputType,\n        placeholder: 'New ' + this.props.type,\n        onChange: this.setValue,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }), this.state.error != '' ? React.createElement(\"small\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, this.state.error) : null, modal);\n    }\n  }]);\n\n  return EditSecurity;\n}(React.Component);\n\nexport default EditSecurity;","map":{"version":3,"sources":["/Volumes/Angela He/treehacks/src/components/User/Settings/EditSecurity.js"],"names":["React","SaveCancelHeader","SimpleModal","EditSecurity","props","setValue","e","setState","value","target","setPassword","password","confirmPword","bool","checkSubmit","error","verifyInput","state","reAuth","firebase","user","successCallback","onFail","message","modal","isInvalid","console","log","type","goBack","inputType","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport SaveCancelHeader from '../../Misc/SaveCancelHeader';\nimport SimpleModal from '../../Misc/SimpleModal';\n\n/*\n  goBack\n  key\n  inputType\n  verifyInput : func(str), return str\n  successCallback\n  failCallback\n  firebase\n*/\nclass EditSecurity extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: '',\n      error: '',\n      password: '',\n      confirmPword: false\n    }\n  }\n\n  setValue = (e) => this.setState({ value: e.target.value })\n\n  setPassword = (e) => this.setState({ password: e.target.value })\n\n  confirmPword = (bool) => this.setState({ confirmPword: bool })\n\n  checkSubmit = () => {\n    let error = this.props.verifyInput(this.state.value);\n    this.setState({ error });\n    if (error === '') {\n      this.confirmPword(true)\n    }\n  }\n\n  reAuth = () => {\n    this.confirmPword(false);\n    this.props.firebase.reAuth(this.state.password, (user) => this.props.successCallback(this.state.value), this.onFail)\n  }\n\n  onFail = (error) => {\n    this.setState({ error: error.message })\n  }\n\n  render() {\n    let modal;\n    let isInvalid = this.state.value == null || this.state.value == '';\n    console.log('key:' + this.props.type);\n    if (this.state.confirmPword == true) {\n      modal = <SimpleModal\n        t='Enter your password'\n        footer={<div>\n          <input type=\"password\" placeholder=\"Password\" onChange={this.setPassword} />\n          <div>\n            <button onClick={() => this.confirmPword(false)}>Cancel</button>\n            <button onClick={this.reAuth}>Confirm</button>\n          </div>\n        </div>}\n      />;\n    }\n\n    return (\n      <div className=\"content\">\n        <SaveCancelHeader\n          Cancel={this.props.goBack}\n          Save={this.checkSubmit}\n          disabled={isInvalid}\n        />\n        <p>{'Change your ' + this.props.type}</p>\n        <input type={this.props.inputType} placeholder={'New ' + this.props.type} onChange={this.setValue} />\n        {this.state.error != '' ? <small>{this.state.error}</small> : null}\n        {modal}\n      </div>\n    );\n  }\n}\n\n\nexport default EditSecurity;"]},"metadata":{},"sourceType":"module"}