{"ast":null,"code":"import _classCallCheck from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Volumes/Angela He/treehacks/src/components/CheckinModal.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport moment from 'moment';\nimport texture1 from './../graphics/flower.png';\nimport texture2 from './../graphics/thing.png';\nimport frontGraphic from './../graphics/3.png';\n\nvar TextQ =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(TextQ, _React$Component);\n\n  function TextQ(props) {\n    var _this;\n\n    _classCallCheck(this, TextQ);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TextQ).call(this, props));\n\n    _this.clearInput = function () {\n      _this.refs.comments.value = \"\";\n    };\n\n    return _this;\n  }\n\n  _createClass(TextQ, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"ci-question\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 21\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 22\n        },\n        __self: this\n      }, this.props.q), React.createElement(\"textarea\", {\n        className: \"feelings\",\n        rows: \"3\",\n        placeholder: \"I think..\",\n        ref: \"comments\",\n        onChange: function onChange(event) {\n          return _this2.props.setAnswer(event.target.value, _this2.props.index);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return TextQ;\n}(React.Component);\n\n;\n\nvar YesNoQ =\n/*#__PURE__*/\nfunction (_React$Component2) {\n  _inherits(YesNoQ, _React$Component2);\n\n  function YesNoQ(props) {\n    var _this3;\n\n    _classCallCheck(this, YesNoQ);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(YesNoQ).call(this, props));\n\n    _this3.clearInput = function () {\n      _this3.setState({\n        answer: null\n      });\n\n      _this3.refs.comments.value = \"\";\n    };\n\n    _this3.state = {\n      answer: _this3.props.answer\n    };\n    return _this3;\n  }\n\n  _createClass(YesNoQ, [{\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var yesClass = 'yes',\n          noClass = 'no',\n          answer = this.state.answer;\n\n      if (answer == 'yes') {\n        yesClass += ' selected';\n      } else if (answer == 'no') {\n        noClass += ' selected';\n      }\n\n      return React.createElement(\"div\", {\n        className: \"ci-question\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, this.props.q), React.createElement(\"div\", {\n        className: \"yesno\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: yesClass,\n        onClick: function onClick() {\n          _this4.setState({\n            answer: 'yes'\n          });\n\n          _this4.props.setAnswer('yes', _this4.props.index);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"jam jam-check\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        className: noClass,\n        onClick: function onClick() {\n          _this4.setState({\n            answer: 'no'\n          });\n\n          _this4.props.setAnswer('no', _this4.props.index);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"jam jam-close\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \" \"))), React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, \"Leave an explanation\"), React.createElement(\"textarea\", {\n        className: \"feelings\",\n        rows: \"1\",\n        placeholder: \"Other comments\",\n        ref: \"comments\",\n        onChange: function onChange(event) {\n          return _this4.props.setComment(event, _this4.props.index);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return YesNoQ;\n}(React.Component);\n\nvar RangeQ =\n/*#__PURE__*/\nfunction (_React$Component3) {\n  _inherits(RangeQ, _React$Component3);\n\n  function RangeQ(props) {\n    var _this5;\n\n    _classCallCheck(this, RangeQ);\n\n    _this5 = _possibleConstructorReturn(this, _getPrototypeOf(RangeQ).call(this, props));\n\n    _this5.clearInput = function () {\n      _this5.setState({\n        range: 5\n      });\n\n      _this5.refs.comments.value = \"\";\n    };\n\n    _this5.onChangeRange = function (event) {\n      _this5.props.setAnswer(event.target.value, _this5.props.index);\n\n      _this5.setState({\n        range: event.target.value\n      });\n    };\n\n    _this5.state = {\n      range: props.val\n    };\n    return _this5;\n  }\n\n  _createClass(RangeQ, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      $('input[type=\"range\"]').each(function (index) {\n        var range = $(this).parent().find('.indicator');\n        var p = $(range).find('p');\n        $(range).hide();\n        $(this).focusin(function () {\n          $(range).css('left', 'calc(' + $(this).val() * (1 / 10) * 100 + '% - 60px)');\n          $(range).show();\n        });\n        $(this).focusout(function () {\n          $(range).hide();\n        });\n        $(this).on('input', function () {\n          $(range).css('left', 'calc(' + $(this).val() * (1 / 10) * 100 + '% - 60px)');\n          $(p).text($(this).val());\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      return React.createElement(\"div\", {\n        className: \"ci-question\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, this.props.q), React.createElement(\"div\", {\n        className: \"mood-measurer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"range\",\n        min: this.props.min,\n        max: this.props.max,\n        value: this.state.range,\n        onChange: this.onChangeRange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"indicator\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, \"4\")), React.createElement(\"div\", {\n        className: \"num\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"small\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, this.props.min), React.createElement(\"small\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, this.state.range), React.createElement(\"small\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, this.props.max))), React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"Leave an explanation\"), React.createElement(\"textarea\", {\n        className: \"feelings\",\n        rows: \"1\",\n        placeholder: \"Other comments\",\n        ref: \"comments\",\n        onChange: function onChange(event) {\n          return _this6.props.setComment(event, _this6.props.index);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return RangeQ;\n}(React.Component);\n\n;\n\nvar CheckinModal =\n/*#__PURE__*/\nfunction (_React$Component4) {\n  _inherits(CheckinModal, _React$Component4);\n\n  function CheckinModal(props) {\n    var _this7;\n\n    _classCallCheck(this, CheckinModal);\n\n    _this7 = _possibleConstructorReturn(this, _getPrototypeOf(CheckinModal).call(this, props));\n\n    _this7.incrementCurrIndex = function () {\n      var i = _this7.state.currIndex;\n\n      _this7.setState({\n        currIndex: i + 1\n      });\n\n      _this7.childQ.current.clearInput();\n    };\n\n    _this7.setAnswer = function (answer, checkinIndex) {\n      var checkins = _this7.state.checkins;\n      checkins[checkinIndex].answer = answer;\n\n      _this7.setState({\n        checkins: checkins\n      });\n    };\n\n    _this7.setComment = function (event, checkinIndex) {\n      var checkins = _this7.state.checkins;\n      checkins[checkinIndex].comment = event.target.value;\n\n      _this7.setState({\n        checkins: checkins\n      });\n    };\n\n    _this7.setStart = function () {\n      _this7.setState({\n        started: true\n      });\n    };\n\n    _this7.getTime = function () {\n      return moment().format('L');\n    };\n\n    _this7.saveCheckinData = function () {\n      var time = _this7.getTime();\n\n      if (_this7.state.checkins.length !== 0) {\n        //save to feed of every person in the network\n        var network = _this7.props.network;\n        var PpfURL = _this7.props.PpfURL === undefined ? null : _this7.props.PpfURL;\n        var data = {\n          PpfURL: PpfURL,\n          name: _this7.props.name,\n          uid: _this7.props.uid,\n          checkin: true,\n          checkinData: _this7.state.checkins,\n          timestamp: new Date().toString()\n        }; //save to your feed\n\n        _this7.props.firebase.feed(_this7.props.uid).add(data).then(function (docRef) {\n          var id = docRef.id;\n\n          for (var i = 0; i < network.length; i++) {\n            _this7.props.firebase.feed(network[i]).doc(id).set(data);\n          } //save to post\n\n\n          _this7.props.firebase.posts().doc(id).set(data);\n        });\n      }\n\n      _this7.props.firebase.user(_this7.props.uid).update({\n        lastCheckin: time\n      }).then(function () {\n        _this7.props.updateCheckin(time);\n      });\n    };\n\n    _this7.state = {\n      checkins: props.checkins,\n      currIndex: 0,\n      started: false,\n      freq: 'daily'\n    };\n    _this7.childQ = React.createRef();\n    return _this7;\n  }\n\n  _createClass(CheckinModal, [{\n    key: \"render\",\n    value: function render() {\n      var _this8 = this;\n\n      var checkinQs = [],\n          checkins = this.state.checkins,\n          currIndex = this.state.currIndex,\n          freq = this.state.freq;\n\n      for (var i = currIndex; i < checkins.length && i < currIndex + 1; i++) {\n        var addEl = void 0;\n\n        if (checkins[i].type == 'text') {\n          addEl = React.createElement(TextQ, {\n            ref: this.childQ,\n            q: checkins[i].q,\n            index: i,\n            setAnswer: this.setAnswer,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 247\n            },\n            __self: this\n          });\n        } else if (checkins[i].type == 'yes/no') {\n          addEl = React.createElement(YesNoQ, {\n            ref: this.childQ,\n            q: checkins[i].q,\n            index: i,\n            setAnswer: this.setAnswer,\n            setComment: this.setComment,\n            answer: checkins[i].answer,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 257\n            },\n            __self: this\n          });\n        } else {\n          addEl = React.createElement(RangeQ, {\n            ref: this.childQ,\n            q: checkins[i].q,\n            index: i,\n            val: checkins[i].answer ? checkins[i].answer : 5,\n            setAnswer: this.setAnswer,\n            setComment: this.setComment,\n            min: 1,\n            max: 10,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 269\n            },\n            __self: this\n          });\n        }\n\n        checkinQs.push(addEl);\n      }\n\n      if (checkins.length === 0) {\n        var freqTime;\n\n        if (freq == 'daily') {\n          freqTime = 'day';\n        }\n\n        checkinQs.push(React.createElement(\"div\", {\n          className: \"ci-question\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 290\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 291\n          },\n          __self: this\n        }, 'Good day, ' + this.props.name + '.'), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 292\n          },\n          __self: this\n        }, \"You've got nothing to check-in - have a great rest of your \" + freqTime + \".\")));\n      }\n\n      var submitButton = null;\n      var content;\n\n      if (!this.state.started) {\n        content = React.createElement(\"div\", {\n          className: \"ci-question\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 306\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: frontGraphic,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 308\n          },\n          __self: this\n        }), React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 309\n          },\n          __self: this\n        }, 'Ready for your ' + freq + ' check-in, ' + this.props.name + '?'), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 310\n          },\n          __self: this\n        }, 'Reflect on what happened today as you answer your ' + checkins.length + ' questions.'));\n        submitButton = React.createElement(\"div\", {\n          className: \"front-butts\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 314\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          id: \"submit\",\n          onClick: this.setStart,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 315\n          },\n          __self: this\n        }, \"Start\"), React.createElement(\"button\", {\n          className: \"remind\",\n          onClick: function onClick() {\n            _this8.props.updateCheckin(_this8.getTime());\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 322\n          },\n          __self: this\n        }, \"Remind me later\"));\n      } else {\n        content = checkinQs;\n\n        if (currIndex + 1 >= checkins.length) {\n          submitButton = React.createElement(\"button\", {\n            id: \"submit\",\n            onClick: this.saveCheckinData,\n            disabled: checkins[currIndex].answer == undefined,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 334\n            },\n            __self: this\n          }, React.createElement(\"span\", {\n            className: \"jam jam-check\",\n            style: {\n              color: '#9FC6C1'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 339\n            },\n            __self: this\n          }));\n        } else {\n          submitButton = React.createElement(\"button\", {\n            id: \"submit\",\n            onClick: this.incrementCurrIndex,\n            disabled: checkins[currIndex].answer == undefined,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 344\n            },\n            __self: this\n          }, React.createElement(\"span\", {\n            className: \"jam jam-arrow-right\",\n            style: {\n              color: '#9FC6C1'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 349\n            },\n            __self: this\n          }));\n        }\n      }\n\n      return React.createElement(\"div\", {\n        className: \"modal-bg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"checkin modal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"bg-texture first\",\n        src: texture1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        className: \"bg-texture second\",\n        src: texture2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"bg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361\n        },\n        __self: this\n      }), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362\n        },\n        __self: this\n      }, moment().format('MMMM D') + \":\\n\" + freq.toUpperCase()), React.createElement(\"h1\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"highlight\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364\n        },\n        __self: this\n      }, \"check-in\")), React.createElement(\"div\", {\n        className: \"checkin-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"progress-bar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"progress\",\n        style: {\n          width: (currIndex + 1) / checkins.length * 100 + '%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368\n        },\n        __self: this\n      })), content, submitButton)));\n    }\n  }]);\n\n  return CheckinModal;\n}(React.Component);\n\nexport default CheckinModal;","map":{"version":3,"sources":["/Volumes/Angela He/treehacks/src/components/CheckinModal.js"],"names":["React","Component","$","moment","texture1","texture2","frontGraphic","TextQ","props","clearInput","refs","comments","value","q","event","setAnswer","target","index","YesNoQ","setState","answer","state","yesClass","noClass","setComment","RangeQ","range","onChangeRange","val","each","parent","find","p","hide","focusin","css","show","focusout","on","text","min","max","CheckinModal","incrementCurrIndex","i","currIndex","childQ","current","checkinIndex","checkins","comment","setStart","started","getTime","format","saveCheckinData","time","length","network","PpfURL","undefined","data","name","uid","checkin","checkinData","timestamp","Date","toString","firebase","feed","add","then","docRef","id","doc","set","posts","user","update","lastCheckin","updateCheckin","freq","createRef","checkinQs","addEl","type","push","freqTime","submitButton","content","color","toUpperCase","width"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport $ from 'jquery';\nimport moment from 'moment';\nimport texture1 from './../graphics/flower.png';\nimport texture2 from './../graphics/thing.png';\nimport frontGraphic from './../graphics/3.png';\n\n\nclass TextQ extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  clearInput = () => {\n    this.refs.comments.value = \"\"\n  }\n\n  render() {\n    return (\n      <div className=\"ci-question\">\n        <h2>{this.props.q}</h2>\n        <textarea\n          className=\"feelings\"\n          rows=\"3\"\n          placeholder=\"I think..\"\n          ref=\"comments\"\n          onChange={(event) => this.props.setAnswer(event.target.value, this.props.index)}></textarea>\n      </div>\n    );\n  }\n\n};\n\nclass YesNoQ extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      answer: this.props.answer,\n    };\n  }\n\n  clearInput = () => {\n    this.setState({ answer: null })\n    this.refs.comments.value = \"\"\n  }\n\n  render() {\n    let yesClass = 'yes', noClass = 'no', answer = this.state.answer;\n    if (answer == 'yes') {\n      yesClass += ' selected';\n    } else if (answer == 'no') {\n      noClass += ' selected';\n    }\n    return (\n      <div className=\"ci-question\">\n        <h2>{this.props.q}</h2>\n        <div className=\"yesno\">\n          <button className={yesClass}\n            onClick={() => {\n              this.setState({ answer: 'yes' })\n              this.props.setAnswer('yes', this.props.index)\n            }}>\n            <span className=\"jam jam-check\" ></span>\n          </button>\n          <button className={noClass}\n            onClick={() => {\n              this.setState({ answer: 'no' })\n              this.props.setAnswer('no', this.props.index)\n            }}>\n            <span className=\"jam jam-close\"> </span>\n          </button>\n        </div>\n        <h3>Leave an explanation</h3>\n        <textarea\n          className=\"feelings\"\n          rows=\"1\"\n          placeholder=\"Other comments\"\n          ref=\"comments\"\n          onChange={(event) => this.props.setComment(event, this.props.index)}></textarea>\n      </div>\n    );\n  }\n\n}\n\nclass RangeQ extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      range: props.val\n    }\n  }\n  clearInput = () => {\n    this.setState({ range: 5 })\n    this.refs.comments.value = \"\"\n  }\n\n\n\n  componentDidMount() {\n    $('input[type=\"range\"]').each(function (index) {\n      let range = $(this).parent().find('.indicator');\n      let p = $(range).find('p');\n      $(range).hide();\n\n      $(this).focusin(function () {\n        $(range).css('left', ('calc(' + $(this).val() * (1 / 10) * 100) + '% - 60px)');\n        $(range).show();\n      });\n\n      $(this).focusout(function () {\n        $(range).hide();\n      });\n\n      $(this).on('input', function () {\n        $(range).css('left', ('calc(' + $(this).val() * (1 / 10) * 100) + '% - 60px)');\n        $(p).text($(this).val());\n      });\n    });\n  }\n\n  onChangeRange = (event) => {\n    this.props.setAnswer(event.target.value, this.props.index);\n    this.setState({ range: event.target.value });\n  }\n\n  render() {\n    return (\n      <div className=\"ci-question\">\n        <h2>{this.props.q}</h2>\n        <div className=\"mood-measurer\">\n          <input type=\"range\"\n            min={this.props.min}\n            max={this.props.max}\n            value={this.state.range}\n            onChange={this.onChangeRange} />\n          <div className=\"indicator\">\n            <p>4</p>\n          </div>\n          <div className=\"num\">\n            <small>{this.props.min}</small>\n            <small>{this.state.range}</small>\n            <small>{this.props.max}</small>\n          </div>\n        </div>\n        <h3>Leave an explanation</h3>\n        <textarea\n          className=\"feelings\"\n          rows=\"1\"\n          placeholder=\"Other comments\"\n          ref=\"comments\"\n          onChange={(event) => this.props.setComment(event, this.props.index)}></textarea>\n      </div>\n    );\n  }\n};\n\nclass CheckinModal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      checkins: props.checkins,\n      currIndex: 0,\n      started: false,\n      freq: 'daily'\n    };\n    this.childQ = React.createRef();\n  }\n\n\n\n  incrementCurrIndex = () => {\n    let i = this.state.currIndex;\n    this.setState({ currIndex: i + 1 });\n    this.childQ.current.clearInput();\n  }\n\n  setAnswer = (answer, checkinIndex) => {\n    let checkins = this.state.checkins;\n    checkins[checkinIndex].answer = answer;\n\n    this.setState({ checkins: checkins });\n  }\n\n  setComment = (event, checkinIndex) => {\n    let checkins = this.state.checkins;\n    checkins[checkinIndex].comment = event.target.value;\n\n    this.setState({ checkins: checkins });\n  }\n\n  setStart = () => {\n    this.setState({ started: true })\n  }\n\n  getTime = () => {\n    return moment().format('L');\n  }\n\n  //TOOD - SAVE CHECKIN DATA\n  saveCheckinData = () => {\n    let time = this.getTime();\n\n    if (this.state.checkins.length !== 0) {\n      //save to feed of every person in the network\n      let network = this.props.network;\n      let PpfURL = this.props.PpfURL === undefined ? null : this.props.PpfURL;\n      let data = {\n        PpfURL: PpfURL,\n        name: this.props.name,\n        uid: this.props.uid,\n        checkin: true,\n        checkinData: this.state.checkins,\n        timestamp: new Date().toString()\n      };\n\n      //save to your feed\n      this.props.firebase.feed(this.props.uid).add(data).then((docRef) => {\n        let id = docRef.id;\n        for (let i = 0; i < network.length; i++) {\n          this.props.firebase.feed(network[i]).doc(id).set(data);\n        }\n\n        //save to post\n        this.props.firebase.posts().doc(id).set(data);\n      });\n    }\n\n\n    this.props.firebase.user(this.props.uid).update({\n      lastCheckin: time\n    }).then(() => {\n      this.props.updateCheckin(time);\n    });\n\n  }\n\n  render() {\n    let checkinQs = [], checkins = this.state.checkins, currIndex = this.state.currIndex, freq = this.state.freq;\n\n\n    for (let i = currIndex; i < checkins.length && i < currIndex + 1; i++) {\n      let addEl;\n      if (checkins[i].type == 'text') {\n        addEl = (\n          <TextQ\n            ref={this.childQ}\n            q={checkins[i].q}\n            index={i}\n            setAnswer={this.setAnswer}\n          />\n        );\n      }\n      else if (checkins[i].type == 'yes/no') {\n        addEl = (\n          <YesNoQ\n            ref={this.childQ}\n            q={checkins[i].q}\n            index={i}\n            setAnswer={this.setAnswer}\n            setComment={this.setComment}\n            answer={checkins[i].answer}\n          />\n        );\n      }\n      else {\n        addEl = (\n          <RangeQ\n            ref={this.childQ}\n            q={checkins[i].q}\n            index={i}\n            val={checkins[i].answer ? checkins[i].answer : 5}\n            setAnswer={this.setAnswer}\n            setComment={this.setComment}\n            min={1}\n            max={10}\n          />\n        );\n      }\n      checkinQs.push(addEl);\n    }\n\n    if (checkins.length === 0) {\n      let freqTime;\n      if (freq == 'daily'){\n        freqTime = 'day';\n      }\n      checkinQs.push(\n        <div className=\"ci-question\">\n          <h2>{'Good day, ' + this.props.name + '.'}</h2>\n          <p>\n            {\"You've got nothing to check-in - have a great rest of your \"+freqTime + \".\"}\n          </p>\n        </div>\n      );\n    }\n\n\n    let submitButton = null;\n\n    let content;\n\n    if (!this.state.started) {\n      content = \n      <div className=\"ci-question\">\n      \n      <img src={frontGraphic} />\n        <h2>{'Ready for your '+freq+' check-in, ' + this.props.name + '?'}</h2>\n        <p>\n          {'Reflect on what happened today as you answer your '+checkins.length+' questions.'}\n      </p>\n      </div>\n      submitButton = <div className=\"front-butts\">\n        <button\n          id=\"submit\"\n          onClick={this.setStart}\n        >\n          Start\n          </button>\n\n        <button\n          className=\"remind\"\n          onClick={() => { this.props.updateCheckin(this.getTime()) }}\n        >\n          Remind me later\n          </button>\n      </div>;\n    }\n    else {\n      content = checkinQs;\n      if (currIndex + 1 >= checkins.length) {\n        submitButton = (\n          <button\n            id=\"submit\"\n            onClick={this.saveCheckinData}\n            disabled={checkins[currIndex].answer == undefined}\n          >\n            <span className=\"jam jam-check\" style={{ color: '#9FC6C1' }}></span>\n          </button>\n        );\n      } else {\n        submitButton = (\n          <button\n            id=\"submit\"\n            onClick={this.incrementCurrIndex}\n            disabled={checkins[currIndex].answer == undefined}\n          >\n            <span className=\"jam jam-arrow-right\" style={{ color: '#9FC6C1' }}></span>\n          </button>\n        );\n      }\n    }\n\n\n    return (\n      <div className=\"modal-bg\">\n        <div className=\"checkin modal\">\n          <img className=\"bg-texture first\" src={texture1} />\n          <img className=\"bg-texture second\" src={texture2} />\n          <div className=\"bg\"></div>\n          <h1>{moment().format('MMMM D') + \":\\n\"+freq.toUpperCase()}</h1>\n          <h1 className=\"title\">\n            <div className=\"highlight\"></div><span>check-in</span>\n          </h1>\n          <div className=\"checkin-content\">\n            <div className=\"progress-bar\">\n              <div className=\"progress\" style={{\n                width: (currIndex + 1) / (checkins.length) * 100 + '%'\n              }}></div>\n            </div>\n            {content}\n\n            {submitButton}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default CheckinModal;"]},"metadata":{},"sourceType":"module"}