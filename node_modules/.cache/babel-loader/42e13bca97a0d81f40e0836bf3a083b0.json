{"ast":null,"code":"import _objectSpread from \"/Users/gollyzoom/Documents/GitHub/treehacks/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/gollyzoom/Documents/GitHub/treehacks/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/gollyzoom/Documents/GitHub/treehacks/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/gollyzoom/Documents/GitHub/treehacks/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/gollyzoom/Documents/GitHub/treehacks/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/gollyzoom/Documents/GitHub/treehacks/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/gollyzoom/Documents/GitHub/treehacks/src/App.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport moment from 'moment';\nimport './App.css';\nimport NavBar from './components/NavBar.js';\nimport CheckinModal from './components/CheckinModal.js';\nimport FeedTab from './components/FeedTab.js';\nimport HomePage from './components/HomePage.js';\nimport NetworkTab from './components/NetworkTab.js';\nimport UserTab from './components/UserTab.js';\nimport Onboarding from './components/Onboarding.js';\nimport { withFirebase } from './components/Firebase';\nvar UserTabFB = withFirebase(UserTab);\nvar NetworkTabFB = withFirebase(NetworkTab);\nvar NavBarFB = withFirebase(NavBar);\nvar FeedTabFB = withFirebase(FeedTab);\nvar CheckinModalFB = withFirebase(CheckinModal); //let feedListen;\n\nvar data = {\n  baseURL: '',\n  activeTab: 0,\n  userData: null,\n  onboarding: false,\n  feed: [],\n  loadMore: false\n},\n    userBase = 'users';\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.fillFeed = function () {};\n\n    _this.SignUp = function (userData) {\n      _this.setState({\n        onboarding: true,\n        userData: userData\n      });\n    };\n\n    _this.checkLogin = function (userData) {\n      console.log(\"USER data \" + JSON.stringify(userData));\n\n      _this.setState({\n        userData: userData\n      }, function () {\n        console.log(_this.state.userData.bio);\n      });\n    };\n\n    _this.updateCheckin = function (lastCheckin) {\n      _this.setState({\n        userData: _objectSpread({}, _this.state.userData, {\n          lastCheckin: lastCheckin\n        })\n      });\n    };\n\n    _this.needToCheckin = function () {\n      if (_this.state.userData.lastCheckin != moment().format('L')) {\n        return true;\n      } else {\n        return false;\n      }\n    };\n\n    _this.setPpfURL = function (downloadURL) {\n      _this.setState({\n        userData: _objectSpread({}, _this.state.userData, {\n          PpfURL: downloadURL\n        })\n      });\n    };\n\n    _this.setActiveTab = function (index) {\n      _this.setState({\n        activeTab: index\n      });\n    };\n\n    _this.setName = function (name) {\n      _this.setState({\n        userData: _objectSpread({}, _this.state.userData, {\n          name: name\n        })\n      });\n    };\n\n    _this.setBio = function (bio) {\n      _this.setState({\n        userData: _objectSpread({}, _this.state.userData, {\n          bio: bio\n        })\n      });\n    };\n\n    _this.setCheckins = function (checkins) {\n      _this.setState({\n        userData: _objectSpread({}, _this.state.userData, {\n          checkins: checkins\n        })\n      });\n    };\n\n    _this.setNetwork = function (network) {\n      _this.setState({\n        userData: _objectSpread({}, _this.state.userData, {\n          network: network\n        })\n      });\n    };\n\n    _this.setRequests = function (requests) {\n      _this.setState({\n        userData: _objectSpread({}, _this.state.userData, {\n          requests: requests\n        })\n      });\n    };\n\n    _this.setOnboarding = function (bool) {\n      _this.setState({\n        onboarding: bool\n      });\n    };\n\n    _this.logout = function () {\n      _this.setState({\n        userData: null\n      });\n    };\n\n    _this.handleScroll = function (e) {\n      //console.log(\"skkitteskeet\");\n      var bottom = e.target.scrollHeight - e.target.scrollTop === e.target.clientHeight;\n\n      _this.setState({\n        loadMore: true\n      });\n\n      if (bottom) {\n        console.log(\"bees\");\n      }\n    };\n\n    _this.state = data;\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {//feedListen();\n    }\n  }, {\n    key: \"render\",\n\n    /*resetScroll = () => {\n      this.setState({})\n    }*/\n    value: function render() {\n      var _this2 = this;\n\n      if (this.state.userData === null) {\n        return React.createElement(HomePage, {\n          checkLogin: this.checkLogin,\n          SignUp: this.SignUp,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188\n          },\n          __self: this\n        });\n      } else if (this.state.onboarding) {\n        return React.createElement(Onboarding, {\n          setOnboarding: this.setOnboarding,\n          name: this.state.userData.name,\n          setCheckins: this.setCheckins,\n          uid: this.state.userData.uid,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 196\n          },\n          __self: this\n        });\n      }\n\n      var activeTab; //active tab is feed\n\n      if (this.state.activeTab == 0) {\n        activeTab = React.createElement(FeedTabFB, {\n          loadMore: this.state.userData.loadMore,\n          PpfURL: this.state.userData.PpfURL,\n          name: this.state.userData.name,\n          uid: this.state.userData.uid,\n          network: this.state.userData.network,\n          feed: this.state.feed,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 210\n          },\n          __self: this\n        });\n      } //active tab is network\n      else if (this.state.activeTab == 1) {\n          // console.log('app.js req-'+JSON.stringify(this.state.userData.requests));\n          activeTab = React.createElement(NetworkTabFB, {\n            uid: this.state.userData.uid,\n            requests: this.state.userData.requests,\n            network: this.state.userData.network,\n            setRequests: this.setRequests,\n            setNetwork: this.setNetwork,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 224\n            },\n            __self: this\n          });\n        } //active tab is profile\n        else {\n            activeTab = React.createElement(UserTabFB, {\n              logout: this.logout,\n              checkins: this.state.userData.checkins,\n              name: this.state.userData.name,\n              bio: this.state.userData.bio,\n              uid: this.state.userData.uid,\n              PpfURL: this.state.userData.PpfURL,\n              setPpfURL: this.setPpfURL,\n              setName: this.setName,\n              setBio: this.setBio,\n              setCheckins: this.setCheckins,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 236\n              },\n              __self: this\n            });\n          }\n\n      return React.createElement(\"div\", {\n        className: \"container\",\n        onScroll: function onScroll(e) {\n          _this2.handleScroll(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, React.createElement(NavBarFB, {\n        setActiveTab: this.setActiveTab,\n        activeTab: this.state.activeTab,\n        requestsLength: this.state.userData.requests ? this.state.userData.requests.length : 0,\n        uid: this.state.userData.uid,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }), activeTab, React.createElement(\"div\", {\n        className: \"bg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"main-bg-texture\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }), this.needToCheckin() ? React.createElement(CheckinModalFB, {\n        PpfURL: this.state.userData.PpfURL,\n        network: this.state.userData.network,\n        name: this.state.userData.name,\n        uid: this.state.userData.uid,\n        updateCheckin: this.updateCheckin,\n        checkins: this.state.userData.checkins ? this.state.userData.checkins : [],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }) : null);\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/gollyzoom/Documents/GitHub/treehacks/src/App.js"],"names":["React","Component","$","moment","NavBar","CheckinModal","FeedTab","HomePage","NetworkTab","UserTab","Onboarding","withFirebase","UserTabFB","NetworkTabFB","NavBarFB","FeedTabFB","CheckinModalFB","data","baseURL","activeTab","userData","onboarding","feed","loadMore","userBase","App","props","fillFeed","SignUp","setState","checkLogin","console","log","JSON","stringify","state","bio","updateCheckin","lastCheckin","needToCheckin","format","setPpfURL","downloadURL","PpfURL","setActiveTab","index","setName","name","setBio","setCheckins","checkins","setNetwork","network","setRequests","requests","setOnboarding","bool","logout","handleScroll","e","bottom","target","scrollHeight","scrollTop","clientHeight","uid","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport $ from 'jquery';\nimport moment from 'moment';\n\nimport './App.css';\nimport NavBar from './components/NavBar.js';\nimport CheckinModal from './components/CheckinModal.js';\nimport FeedTab from './components/FeedTab.js';\nimport HomePage from './components/HomePage.js';\nimport NetworkTab from './components/NetworkTab.js';\nimport UserTab from './components/UserTab.js';\nimport Onboarding from './components/Onboarding.js';\n\n\nimport { withFirebase } from './components/Firebase';\n\n\nconst UserTabFB = withFirebase(UserTab);\n\nconst NetworkTabFB = withFirebase(NetworkTab);\n\nconst NavBarFB = withFirebase(NavBar);\n\nconst FeedTabFB = withFirebase(FeedTab);\n\nconst CheckinModalFB = withFirebase(CheckinModal);\n//let feedListen;\n\nvar data = {\n  baseURL: '',\n  activeTab: 0,\n  userData: null,\n  onboarding: false,\n  feed: [],\n  loadMore:false\n},\n  userBase = 'users';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = data;\n  }\n\n  componentDidMount() {\n\n  }\n\n  componentWillUnmount() {\n    //feedListen();\n  }\n\n  fillFeed = () => {\n\n  }\n  \n  SignUp = (userData) => {\n    this.setState({\n      onboarding: true,\n      userData: userData,\n    });\n  }\n\n  checkLogin = (userData) => {\n      console.log(\"USER data \" + JSON.stringify(userData));\n    this.setState({\n      userData: userData,\n    },()=>{\n        console.log(this.state.userData.bio)\n    });\n  }\n\n  // update this.state.lastCheckin as well as input checkin data to feed/database\n  updateCheckin = (lastCheckin) => {\n    this.setState({\n      userData: {\n        ...this.state.userData,\n        lastCheckin: lastCheckin\n      }\n    });\n  }\n\n  //check this.state.lastCheckin and see whether user has checked in today\n  needToCheckin = () => {\n    if (this.state.userData.lastCheckin != moment().format('L')) {\n      return true;\n    }\n    else {\n      return false;\n    }\n  }\n\n  setPpfURL = (downloadURL) => {\n    this.setState({\n      userData: {\n        ...this.state.userData,\n        PpfURL: downloadURL\n      }\n    });\n\n  }\n\n  setActiveTab = (index) => {\n    this.setState({\n      activeTab: index,\n    });\n  }\n\n  setName = (name) => {\n    this.setState({\n      userData:\n      {\n        ...this.state.userData,\n        name: name\n      }\n    })\n  }\n  \n  setBio = (bio) => {\n      this.setState({\n          userData:\n          {\n              ...this.state.userData,\n              bio: bio\n          }\n      })\n  }\n\n  setCheckins = (checkins) => {\n    this.setState({\n      userData:\n      {\n        ...this.state.userData,\n        checkins: checkins\n      }\n    })\n  }\n\n  setNetwork = (network) => {\n    this.setState({\n      userData:\n      {\n        ...this.state.userData,\n        network: network\n      }\n    })\n  }\n\n  setRequests = (requests) => {\n    this.setState({\n      userData:\n      {\n        ...this.state.userData,\n        requests: requests\n      }\n    })\n  }\n\n  setOnboarding = (bool) => {\n    this.setState({ onboarding: bool })\n  }\n\n  //logout\n  logout = () => {\n    this.setState({\n      userData: null\n    });\n  }\n\n  handleScroll = (e) => {\n       //console.log(\"skkitteskeet\");\n      const bottom = e.target.scrollHeight - e.target.scrollTop === e.target.clientHeight;\n      this.setState({\n          loadMore:true\n      })\n      if (bottom) { console.log(\"bees\") }\n  }\n  \n  /*resetScroll = () => {\n    this.setState({})\n  }*/\n  render() {\n\n\n\n    if (this.state.userData === null) {\n      return (\n        <HomePage\n          checkLogin={this.checkLogin}\n          SignUp={this.SignUp}\n        />\n      );\n    }\n    else if (this.state.onboarding) {\n      return (\n        <Onboarding\n          setOnboarding={this.setOnboarding}\n          name={this.state.userData.name}\n          setCheckins={this.setCheckins}\n          uid={this.state.userData.uid}\n        />\n      );\n    }\n\n\n    var activeTab;\n    //active tab is feed\n    if (this.state.activeTab == 0) {\n      activeTab = (\n        <FeedTabFB\n          loadMore={this.state.userData.loadMore}\n          PpfURL={this.state.userData.PpfURL}\n          name={this.state.userData.name}\n          uid={this.state.userData.uid}\n          network={this.state.userData.network}\n          feed={this.state.feed}\n        />\n      );\n    }\n    //active tab is network\n    else if (this.state.activeTab == 1) {\n      // console.log('app.js req-'+JSON.stringify(this.state.userData.requests));\n      activeTab = (\n        <NetworkTabFB\n          uid={this.state.userData.uid}\n          requests={this.state.userData.requests}\n          network={this.state.userData.network}\n          setRequests={this.setRequests}\n          setNetwork={this.setNetwork}\n        />\n      );\n    }\n    //active tab is profile\n    else {\n      activeTab = (\n        <UserTabFB\n          logout={this.logout}\n          checkins={this.state.userData.checkins}\n          name={this.state.userData.name}\n          bio = {this.state.userData.bio}\n          uid={this.state.userData.uid}\n          PpfURL={this.state.userData.PpfURL}\n          setPpfURL={this.setPpfURL}\n          setName={this.setName}\n          setBio={this.setBio}\n          setCheckins={this.setCheckins}\n        />\n      );\n    }\n\n    return (\n      <div className=\"container\"  onScroll={(e) => {this.handleScroll(e)}}>\n        <NavBarFB\n          setActiveTab={this.setActiveTab}\n          activeTab={this.state.activeTab}\n          requestsLength={this.state.userData.requests ? this.state.userData.requests.length : 0}\n          uid={this.state.userData.uid}\n        />\n        {activeTab}\n\n        <div className=\"bg\"></div>\n        <div className=\"main-bg-texture\"></div>\n\n        {this.needToCheckin() ?\n          <CheckinModalFB\n            PpfURL={this.state.userData.PpfURL}\n            network={this.state.userData.network}\n            name={this.state.userData.name}\n            uid={this.state.userData.uid}\n            updateCheckin={this.updateCheckin}\n            checkins={this.state.userData.checkins ? this.state.userData.checkins : []}\n          />\n          : null}\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}